import{j as n}from"./jsx-runtime-CDt2p4po.js";import{r as F}from"./index-GiUgBvb1.js";import{c as P,u as H,R as f,C as y,L as R}from"./LanguageContext-n6OuJeuk.js";import{S as W}from"./ServiceLogo-CpE1bRn6.js";import{m as D}from"./proxy-Cm3FBkwj.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=P("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),G=r=>new Date(r.getFullYear(),r.getMonth(),1),B=r=>r.getDay(),J=r=>new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),Q=r=>{const o=new Date(r),i=o.getDay(),d=o.getDate()-i;return new Date(o.setDate(d))},U=(r,o)=>{const i=new Date(r);return i.setDate(i.getDate()+o),i},z=({currentDate:r,subscriptions:o,onEdit:i,onAdd:d,onMoveSubscription:x})=>{const{t:X,dateLocale:j,config:N}=H(),g=r.getFullYear(),m=r.getMonth(),[T,p]=F.useState(null),$=G(r),S=B($),E=J(r),b=[],L=Q(new Date);for(let e=0;e<7;e++)b.push(U(L,e).toLocaleDateString(j,{weekday:"short"}));const M=e=>{const s=new Date(g,m,e).getDay();return o.filter(c=>c.recurrence===f.WEEKLY?c.day===s:c.day===e)},O=(e,a)=>{e.dataTransfer.setData("subId",a),e.dataTransfer.effectAllowed="move"},C=(e,a)=>{e.preventDefault(),p(a)},I=e=>{e.preventDefault(),p(null)},A=(e,a)=>{e.preventDefault(),p(null);const s=e.dataTransfer.getData("subId");s&&x&&x(s,a)},Y=Array(S).fill(null),q=Array.from({length:E},(e,a)=>a+1),_=`${g}-${m}`;return n.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-[32px] shadow-soft dark:shadow-none border border-zinc-100 dark:border-zinc-800 p-6",children:[n.jsx("div",{className:"grid grid-cols-7 mb-4",children:b.map(e=>n.jsx("div",{className:"text-center text-[11px] font-extrabold text-zinc-400 uppercase tracking-widest",children:e.replace(".","")},e))}),n.jsxs(D.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:"grid grid-cols-7 gap-2 auto-rows-fr",children:[Y.map((e,a)=>n.jsx("div",{className:"min-h-[100px]"},`blank-${a}`)),q.map(e=>{const a=M(e),s=e===new Date().getDate()&&m===new Date().getMonth()&&g===new Date().getFullYear(),c=T===e,l=a.length>2;return n.jsxs("div",{className:`
                min-h-[100px] p-2 rounded-2xl relative group transition-all duration-200 border
                ${s?"bg-zinc-900 dark:bg-zinc-800 text-white border-transparent shadow-lg shadow-zinc-900/20":c?"bg-indigo-50 border-indigo-200 dark:bg-indigo-900/30 dark:border-indigo-800":"bg-zinc-50 dark:bg-black border-transparent hover:border-zinc-200 dark:hover:border-zinc-800 hover:bg-white dark:hover:bg-zinc-900"}
              `,onDragOver:t=>C(t,e),onDragLeave:I,onDrop:t=>A(t,e),onClick:t=>{t.target===t.currentTarget&&d(e)},"data-testid":`day-cell-${e}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2 pointer-events-none",children:[n.jsx("span",{className:`text-sm font-bold w-7 h-7 flex items-center justify-center rounded-full ${s?"text-white":"text-zinc-500 dark:text-zinc-400"}`,children:e}),n.jsx("button",{onClick:t=>{t.stopPropagation(),d(e)},className:`pointer-events-auto w-6 h-6 rounded-full flex items-center justify-center transition-all ${s?"text-zinc-400 hover:text-white":"text-zinc-300 hover:text-zinc-900 dark:hover:text-white"} opacity-0 group-hover:opacity-100`,children:n.jsx(K,{size:14})})]}),n.jsx("div",{className:`flex ${l?"grid grid-cols-2 gap-1.5":"flex-col gap-1.5"}`,children:a.map(t=>n.jsxs(D.div,{draggable:!0,onDragStart:h=>O(h,t.id),onClick:h=>{h.stopPropagation(),i(t)},className:`
                      cursor-grab active:cursor-grabbing
                      ${l?"aspect-square justify-center p-1 rounded-xl":"flex items-center gap-2 p-1.5 pr-2.5 rounded-full"}
                      text-xs font-bold 
                      shadow-sm hover:shadow-md transition-all z-10 relative
                      ${s?"bg-zinc-800 dark:bg-zinc-700 text-white border border-zinc-700":"bg-white dark:bg-zinc-900 text-zinc-700 dark:text-zinc-300 border border-zinc-100 dark:border-zinc-800"}
                    `,title:`${t.name} - ${t.price}${N.currency}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:[n.jsx("div",{className:`${l?"w-6 h-6":"w-4 h-4"} rounded-full overflow-hidden flex-shrink-0 bg-white`,children:n.jsx(W,{name:t.name,logo:t.logo,domain:t.domain,color:t.color})}),!l&&n.jsx("span",{className:"truncate hidden sm:inline",children:t.name})]},`${t.id}-${e}`))})]},`day-${e}`)})]},_)]})};z.__docgenInfo={description:"",methods:[],displayName:"Calendar",props:{currentDate:{required:!0,tsType:{name:"Date"},description:""},subscriptions:{required:!0,tsType:{name:"Array",elements:[{name:"Subscription"}],raw:"Subscription[]"},description:""},onEdit:{required:!0,tsType:{name:"signature",type:"function",raw:"(sub: Subscription) => void",signature:{arguments:[{type:{name:"Subscription"},name:"sub"}],return:{name:"void"}}},description:""},onAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(day: number) => void",signature:{arguments:[{type:{name:"number"},name:"day"}],return:{name:"void"}}},description:""},onMoveSubscription:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, newDay: number) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"number"},name:"newDay"}],return:{name:"void"}}},description:""}}};const V=[{id:"1",name:"Netflix",price:15,day:10,recurrence:f.MONTHLY,category:y.ENTERTAINMENT,color:"#E50914"},{id:"2",name:"Gym",price:30,day:2,recurrence:f.WEEKLY,category:y.HEALTH,color:"#10B981"}],ae={title:"MÃ©tiers/Calendar",component:z,decorators:[r=>n.jsx(R,{children:n.jsx("div",{className:"p-6 bg-zinc-50 dark:bg-zinc-950 min-h-screen",children:n.jsx(r,{})})})],args:{currentDate:new Date("2025-01-15"),subscriptions:V,onEdit:()=>{},onAdd:()=>{},onMoveSubscription:()=>{}}},u={};var v,w,k;u.parameters={...u.parameters,docs:{...(v=u.parameters)==null?void 0:v.docs,source:{originalSource:"{}",...(k=(w=u.parameters)==null?void 0:w.docs)==null?void 0:k.source}}};const se=["Default"];export{u as Default,se as __namedExportsOrder,ae as default};
